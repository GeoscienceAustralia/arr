<!DOCTYPE html>
<html lang="en" class="no-js">
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>ARR: A guide to flood estimation</title>
      <!-- demo styles -->
      <link rel="stylesheet" type="text/css" href="css/demo.css" />
      <!-- menu styles -->
      <link rel="stylesheet" type="text/css" href="css/component.css" />
      <link rel="stylesheet" type="text/css" href="css/lightbox.css" />
      <script type="text/javascript" src="https://s3-ap-southeast-2.amazonaws.com/plainshapes/cdn/arr/modernizr-custom.js"></script>
      <script type="text/javascript" async
         src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
         </script>
      </head>

      <body>
         <!-- Main container -->
         <div class="container">
            <!-- Blueprint header -->
            <header class="bp-header cf">
            <div class="dummy-logo">
               <div class="dummy-icon"></div>
               <h2 class="dummy-heading">A guide to flood estimation</h2>
            </div>
            <div class="bp-header__main">				
            </div>
            </header>
            <button class="action action--open" aria-label="Open Menu"><span class="icon icon--menu"></span></button>
            <nav id="ml-menu" class="menu">
            <button class="action action--close" aria-label="Close Menu"><span class="icon icon--cross"></span></button>
            <div class="menu__wrap">
               <ul data-menu="main" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-1" href="#">Book 1: Scope and Philosophy</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-2" href="#">Book 2: Rainfall Estimation</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-3" href="#">Book 3: Peak Flow Estimation</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-4" href="#">Book 4: Catchment Simulation</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-5" href="#">Book 5: Flood Hydrograph Estimation</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-6" href="#">Book 6: Flood Hydraulics</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-7" href="#">Book 7: Application of Catchment Modelling Systems </a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8" href="#">Book 8: Very Rare to Extreme Flood Estimation</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-9" href="#">Book 9: Runoff in Urban Areas</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-10" href="#">Bibliography, Glossary and Indices</a></li>
               </ul>
               <!-- Submenu 1 -->
               <ul data-menu="submenu-1" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-1-1" data-bk="01" data-ch="01" data-sec href="#">Ch 1: Introduction</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-1-2" data-bk="01" data-ch="02" data-sec href="#">Ch 2: Fundamental Issues</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-1-3" data-bk="01" data-ch="03" data-sec href="#">Ch 3: Approaches to Flood Estimation</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-1-4" data-bk="01" data-ch="04" data-sec href="#">Ch 4: Data</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-1-5" data-bk="01" data-ch="05" data-sec href="#">Ch 5: Risk Based Design</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-1-6" data-bk="01" data-ch="06" data-sec href="#">Ch 6: Climate Change Considerations</a></li>
               </ul>
               <!-- Submenu 1-1 -->
               <!-- 				<ul data-menu="submenu-1-1" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-bk="01" data-ch="01" data-sec href="#">1.1 General</a></li>
                  <li class="menu__item"><a class="menu__link" data-bk="01" data-ch="02" data-sec href="#">1.2 Contents</a></li>
                  <li class="menu__item"><a class="menu__link" href="#">1.3 Section Title</a></li>
                  <li class="menu__item"><a class="menu__link" href="#">1.4 Section Title</a></li>
               </ul> -->

               <!-- Submenu 2 -->
               <ul data-menu="submenu-2" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-2-1" data-bk="02" data-ch="01" data-sec href="#">Ch 1: Introduction</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-2-2" data-bk="02" data-ch="02" data-sec href="#">Ch 2: Rainfall Models</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-2-3" data-bk="02" data-ch="03" data-sec href="#">Ch 3: Design Rainfall</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-2-4" data-bk="02" data-ch="04" data-sec href="#">Ch 4: Spatial Patterns</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-2-5" data-bk="02" data-ch="05" data-sec href="#">Ch 5: Temporal Patterns</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-2-6" data-bk="02" data-ch="06" data-sec href="#">Ch 6: Continuous Rainfall Simulation</a></li>
               </ul>

               <!-- Submenu 3 -->
               <ul data-menu="submenu-3" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-3-1" data-bk="03" data-ch="01" data-sec href="#">Ch 1: Introduction</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-3-2" data-bk="03" data-ch="02" data-sec href="#">Ch 2: At-Site Flood Frequency Analysis</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-3-3" data-bk="03" data-ch="03" data-sec href="#">Ch 3: Regional Flood Methods</a></li>
               </ul>

               <!-- Submenu 4 -->
               <ul data-menu="submenu-4" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-4-1" data-bk="04" data-ch="01" data-sec href="#">Ch 1: Introduction</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-4-2" data-bk="04" data-ch="02" data-sec href="#">Ch 2: Catchment Modelling Concepts</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-4-3" data-bk="04" data-ch="03" data-sec href="#">Ch 3: Types of Catchment Modelling Systems</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-4-3" data-bk="04" data-ch="04" data-sec href="#">Ch 4: Catchment Modelling System Processes</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-4-3" data-bk="04" data-ch="05" data-sec href="#">Ch 5: Treatment of Joint Probability</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-4-3" data-bk="04" data-ch="05" data-sec href="#">Ch 6: Simulation Uncertainty</a></li>
               </ul>

               <!-- Submenu 5 -->
               <ul data-menu="submenu-5" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-5-1" data-bk="05" data-ch="01" data-sec href="#">Ch 1: Introduction</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-5-2" data-bk="05" data-ch="02" data-sec href="#">Ch 2: Types of Hydrologic Models</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-5-3" data-bk="05" data-ch="03" data-sec href="#">Ch 3: Hydrologic Models</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-5-3" data-bk="05" data-ch="04" data-sec href="#">Ch 4: Baseflow Models</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-5-3" data-bk="05" data-ch="05" data-sec href="#">Ch 5: Losses</a></li>
               </ul>

               <!-- Submenu 6 -->
               <ul data-menu="submenu-6" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-6-1" data-bk="06" data-ch="01" data-sec href="#">Ch 1: Introduction</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-6-2" data-bk="06" data-ch="02" data-sec href="#">Ch 2: Open Channel Hydraulics</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-6-3" data-bk="06" data-ch="03" data-sec href="#">Ch 3: Hydraulic Structures</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-6-3" data-bk="06" data-ch="04" data-sec href="#">Ch 4: Numerical Models</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-6-3" data-bk="06" data-ch="05" data-sec href="#">Ch 5: Interaction of Coastal and Riverine Flooding</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-6-3" data-bk="06" data-ch="06" data-sec href="#">Ch 6: Blockage of Hydraulic Structures</a></li>
               </ul>

               <!-- Submenu 7 -->
               <ul data-menu="submenu-7" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-7-1" data-bk="07" data-ch="01" data-sec href="#">Ch 1: Introduction</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-7-2" data-bk="07" data-ch="02" data-sec href="#">Ch 2: Application of Catchment Modelling</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-7-3" data-bk="07" data-ch="03" data-sec href="#">Ch 3: Implementation</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-7-3" data-bk="07" data-ch="04" data-sec href="#">Ch 4: Establishment</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-7-3" data-bk="07" data-ch="05" data-sec href="#">Ch 5: Calibration and Validation</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-7-3" data-bk="07" data-ch="06" data-sec href="#">Ch 6: Parameter Estimation Techniques</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-7-3" data-bk="07" data-ch="07" data-sec href="#">Ch 7: Uncertainty Determination</a></li>
               </ul>

               <!-- Submenu 8 -->
               <ul data-menu="submenu-8" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8-1" data-bk="08" data-ch="01" data-sec href="#">Ch 1: Introduction</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8-2" data-bk="08" data-ch="02" data-sec href="#">Ch 2: Procedures for Estimating Rare to Extreme Floods</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8-3" data-bk="08" data-ch="03" data-sec href="#">Ch 3: Estimation of Very Rare to Extreme Rainfalls</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8-3" data-bk="08" data-ch="04" data-sec href="#">Ch 4: Estimation of Rainfall Excess for Very Rare to Extreme Events</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8-3" data-bk="08" data-ch="05" data-sec href="#">Ch 5: Selection, Configuration, and Calibration of Hydrograph Models</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8-3" data-bk="08" data-ch="06" data-sec href="#">Ch 6: Derivation of Design Floods</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8-3" data-bk="08" data-ch="07" data-sec href="#">Ch 7: Special Design Considerations</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8-3" data-bk="08" data-ch="08" data-sec href="#">Ch 8: Worked Examples</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-8-3" data-bk="08" data-ch="09" data-sec href="#">Ch 9: References</a></li>
               </ul>

               <!-- Submenu 9 -->
               <ul data-menu="submenu-9" class="menu__level">
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-9-1" data-bk="09" data-ch="01" data-sec href="#">Ch 1: Introduction</a></li>
                  <li class="menu__item"><a class="menu__link" data-submenu="submenu-9-2" data-bk="09" data-ch="02" data-sec href="#">Ch 2: Safety Design Criteria</a></li>
               </ul>

            </div>
            </nav>
            <div class="content">
               <!-- Ajax loaded content here -->
               <h1 class="title">Australian Rainfall and Runoff</h1>
               <h2 class="subtitle">A Guide to Flood Estimation</h2>
               <a href="http://creativecommons.org/licenses/by/4.0/"><img src="figures/88x31_cc_40_by.png" alt="Creative Commons License Logo"/></a>
               <p>The Australian Rainfall and Runoff: A guide to flood estimation (ARR) is licensed under the Creative Commons Attribution 4.0 Licence, unless otherwise indicated or marked.</p> 

               <p><strong>Please give attribution to</strong>: © Commonwealth of Australia (Geoscience Australia) 2015.</p>

               <h3>Third-Party Material</h3> 

               <p>The Commonwealth of Australia and the ARR’s contributing authors (through Engineers Australia) have taken steps to both identify third-party material and secure permission for its reproduction and reuse. However, please note that where these materials are not licensed under a Creative Commons licence or similar terms of use, you should obtain permission from the relevant third-party to reuse their material beyond the ways you are legally permitted to use them under the fair dealing provisions of the <a href="http://www.comlaw.gov.au/Details/C2014C00291">Copyright Act 1968</a>.</p>


               <p>
                   For further information about the copyright in this document, please contact:<br/>
                   Intellectual Property and Copyright Manager<br/>
                   Corporate Branch<br/>
                   Geoscience Australia<br/>
                   GPO Box 378<br/>
                   CANBERRA ACT 2601<br/>
                   Phone: +61 2 6249 9367 or email: <a href="mailto:copyright@ga.gov.au">copyright@ga.gov.au</a>
               </p>


               <p>ISBN Pending Publication March 2016</p>

               <p>How to reference this book:<br/>
               Ball, J (Ed), Australian Rainfall and Runoff: A Guide to Flood Estimation – Draft for Industry Comment 151205, © Commonwealth of Australia (Geoscience Australia), 2015.</p>  

               <h2>ARR 2016 Ministerial Foreword</h2>

               <p>In late 2010 and early 2011 Queensland and Victoria were devastated by a series of storms, floods and cyclones that resulted in loss of life, significant property damage and financial loss for many communities. Events such as these highlight the challenges in predicting these extreme events as well as managing their impacts.</p>

               <p>The Australian Government recognised this challenge and committed to the comprehensive revision of the Australia Rainfall and Runoff (ARR) guidelines.</p>

               <p>ARR 2016 will have national application and will be essential for policy decisions and projects in areas as diverse as:</p>

               <ul>
                  <li>infrastructure such as roads, rail airports, bridges, dams, stormwater and sewer systems</li>
                  <li>town planning</li>
                  <li>mining</li>
                  <li>developing flood management plan for urban and rural communities</li>
                  <li>flood warnings and flood emergency management </li>
                  <li>operation of regulated river systems, and</li>
                  <li>prediction of extreme flood levels.</li>
               </ul>

               <p>The ARR was last updated in 1997. Since then, our understanding of the complexity of the Australian landscape has grown. This understanding has been gained through the collection and analysis of new data, reflective of Australia’s variable landscape. In previous versions of the ARR, only limited Australian data was available so overseas models were applied in many cases. The 2016 revision includes all Australian data, including a national database of extreme flood hazards and 30 years of over 8000 rainfall gauges across the Nation. Not only does the ARR 2016 make use of rich historical data but its dynamic development will allow new data and information to be used as it becomes available. </p>

               <p>The revision of the ARR would not have been possible without the support and funding from the Australian Government as well as the significant contributions from Engineers Australia members, flood practitioners and academia. This collaborative effort is a testament of the community, industry, academia and government to improve our understanding the nature of flooding to reduce the social and economic impacts will contribute to building resilient communities. </p>


               <p><img src="figures/88x32_andrews_sig.png" alt="Ministers Signature"/><br/>
               The Hon Karen Andrews MP<br/>
               Assistant Minister for Science</p>

               <h2>PREFACE</h2>
               <p>Since its first publication in 1958, Australian Rainfall and Runoff (ARR) has remained one of the most influential and widely used guidelines published by Engineers Australia (EA).  The 3rd edition, published in 1987, retained the same level of national and international acclaim as its predecessors. </p>

               <p>With nationwide applicability, balancing the varied climates of Australia, the information and the approaches presented in Australian Rainfall and Runoff are essential for policy decisions and projects involving:</p>

               <ul>
                  <li>infrastructure such as roads, rail, airports, bridges, dams, stormwater and sewer systems;</li>
                  <li>town planning;</li>
                  <li>mining;</li>
                  <li>developing flood management plans for urban and rural communities;</li>
                  <li>flood warnings and flood emergency management;</li>
                  <li>operation of regulated river systems; and</li>
                  <li>prediction of extreme flood levels.</li>
               </ul>

               <p>However, many of the practices recommended in the 1987 edition of ARR have become outdated, and no longer represent the accepted views of professionals, both in terms of technique and approach to water management. This fact, coupled with greater understanding of climate and climatic influences makes the securing of current and complete rainfall and streamflow data and expansion of focus from flood events to the full spectrum of flows and rainfall events, crucial to maintaining an adequate knowledge of the processes that govern Australian rainfall and streamflow in the broadest sense, allowing better management, policy and planning decisions to be made.</p>

               <p>One of the major responsibilities of the National Committee on Water Engineering of Engineers Australia is the periodic revision of ARR. While the NCWE had long identified the need to update ARR it had become apparent by 2002 that even with a piecemeal approach the task could not be carried out without significant financial support. In 2008 the revision of ARR was identified as a priority in the Council of Australian Governments endorsed National Adaptation Framework for Climate Change.</p>

               <p>In addition to the update 21 projects were identified with the aim of filling knowledge gaps.  Funding for Stages 1 and 2 of the ARR revision projects were provided by the now Department of the Environment. Stage 3 was funded by Geoscience Australia. Funding for Stages 2 and 3 of Project 1 (Development of Intensity-Frequency-Duration information across Australia) has been provided by the Bureau of Meteorology. The outcomes of the projects assisted the ARR Editorial Team with the compiling and writing of chapters in the revised ARR. Steering and Technical Committees were established to assist the ARR Editorial Team in guiding the projects to achieve desired outcomes.</p>

               <table>
                  <tbody>
                     <tr>
                        <td>
                           <p>Assoc Prof James Ball<br/>
                           ARR Editor<br/>
                           <img src="figures/88x63_ball_signature.png" alt="Ball Signature"/>
                           </p>
                        </td>
                        <td>
                           <p>Mark Babister<br/>
                           Chair Technical Committee for ARR Revision Projects<br/>
                           <img src="figures/88x23_babister_signature.png" alt="Babister Signature"/>
                           </p>
                        </td>
                     </tr>
                  </tbody>
               </table>


               <h2>ARR Technical Committee</h2>

               <p>Chair: Mark Babister</p>

               <p>Members:</p>
               <ul>
                  <li>Associate Professor James Ball</li>
                  <li>Professor George Kuczera</li>
                  <li>Professor Martin Lambert</li>
                  <li>Dr Rory Nathan </li>
                  <li>Dr Bill Weeks</li>
                  <li>Associate Professor Ashish Sharma</li>
                  <li>Dr Bryson Bates</li>
                  <li>Steve Finlay</li>
               </ul>

               <p>Related Appointments:</p>
               <p>ARR Project Engineer: Monique Retallick<br/>
               ARR Admin Support: Isabelle Testoni<br/>
               Assisting TC on Technical Matters: Erwin Weinmann, Dr Michael Leonard</p>

               <h2>Status of this document</h2>

               <p>This document forms part of an industry consultation release of Australian Rainfall and Runoff. We anticipate a complete launch by March 2016.</p>

               <p>In development of this guidance, also discussed in Book 1 of ARR 1987, it was recognised that knowledge and information availability is not fixed and that future research and applications will develop new techniques and information. This is particularly relevant in applications where techniques have been extrapolated from the region of their development to other regions and where efforts should be made to reduce large uncertainties in current estimates of design flood characteristics.</p>

               <p>Therefore, where circumstances warrant, designers have a duty to use other procedures and design information more appropriate for their design flood problem. The authorship team of this edition of Australian Rainfall and Runoff believe that the use of new or improved procedures should be encouraged, especially where these are more appropriate than the methods described in this publication.</p>

               <p>Therefore where relevant this draft of ARR can be used in practice prior to finalisation.</p>

               <p>Care should be taken when combining inputs derived using ARR 1987 and methods described in this document.</p>

               <p>A summary of the status:</p>

               <table border="1">
                  <tbody>
                     <tr>
                        <th scope="col"><p>Book</p></th>
                        <th scope="col"><p>Content</p></th>
                        <th scope="col"><p>Graphs and Figures</p></th>
                        <th scope="col"><p>Examples</p></th>
                     </tr>
                     <tr>
                        <td><p>Book 1</p></td>
                        <td><p>Advanced Draft</p></td>
                        <td><p>Advanced Draft</p></td>
                        <td><p>Advanced Draft</p></td>
                     </tr>
                     <tr>
                        <td><p>Book 2</p></td>
                        <td><p>Working Draft</p></td>
                        <td><p>Working Draft</p></td>
                        <td><p>Working Draft</p></td>
                     </tr>
                     <tr>
                        <td><p>Book 3</p></td>
                        <td><p>Advanced Draft</p></td>
                        <td><p>Advanced Draft</p></td>
                        <td><p>Advanced Draft</p></td>
                     </tr>
                     <tr>
                        <td><p>Book 4</p></td>
                        <td><p>In Preparation</p></td>
                        <td><p>In Preparation</p></td>
                        <td><p>In Preparation</p></td>
                     </tr>
                     <tr>
                        <td><p>Book 5</p></td>
                        <td><p>Working Draft</p></td>
                        <td><p>Working Draft</p></td>
                        <td><p>Working Draft</p></td>
                     </tr>
                     <tr>
                        <td><p>Book 6</p></td>
                        <td><p>Working Draft</p></td>
                        <td><p>Working Draft</p></td>
                        <td><p>Working Draft</p></td>
                     </tr>
                     <tr>
                        <td><p>Book 7</p></td>
                        <td><p>In Preparation</p></td>
                        <td><p>In Preparation</p></td>
                        <td><p>In Preparation</p></td>
                     </tr>
                     <tr>
                        <td><p>Book 8</p></td>
                        <td><p>Advanced Draft</p></td>
                        <td><p>Advanced Draft</p></td>
                        <td><p>Advanced Draft</p></td>
                     </tr>
                     <tr>
                        <td><p>Book 9</p></td>
                        <td><p>In Preparation</p></td>
                        <td><p>In Preparation</p></td>
                        <td><p>In Preparation</p></td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <!-- /view -->
         <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.js"></script>
         <script type="text/javascript" src="https://s3-ap-southeast-2.amazonaws.com/plainshapes/cdn/arr/classie.js"></script>
         <script type="text/javascript" src="https://s3-ap-southeast-2.amazonaws.com/plainshapes/cdn/arr/main.js"></script>
         <script type="text/javascript" src="https://s3-ap-southeast-2.amazonaws.com/plainshapes/cdn/arr/lightbox.js"></script>
         <script>
            // Declare a global variable to hold our previous target
            var oldPageTarget = "index.xhtml";
            (function() {
               var menuEl = document.getElementById('ml-menu'),
               mlmenu = new MLMenu(menuEl, {
                  // breadcrumbsCtrl : true, // show breadcrumbs
                  // initialBreadcrumb : 'all', // initial breadcrumb text
                  backCtrl : false, // show back button
                  // itemsDelayInterval : 60, // delay between each menu item sliding animation
                  onItemClick: loadSection // callback: item that doesn´t have a submenu gets clicked - onItemClick([event], [inner HTML of the clicked item])
               });

               // mobile menu toggle
               var openMenuCtrl = document.querySelector('.action--open'),
               closeMenuCtrl = document.querySelector('.action--close');

               openMenuCtrl.addEventListener('click', openMenu);
               closeMenuCtrl.addEventListener('click', closeMenu);

               function openMenu() {
                  classie.add(menuEl, 'menu--open');
               }

               function closeMenu() {
                  classie.remove(menuEl, 'menu--open');
               }

               // simulate grid content loading
               var gridWrapper = document.querySelector('.content');

               function loadSection(ev, data, itemName) {

                  menuItem = ev.target;
                  ev.preventDefault();

                  var dataBk = $(menuItem).data('bk');
                  var dataCh = $(menuItem).data('ch');
                  var dataSec = $(menuItem).data('sec');

                  var book = 'bk' + dataBk + 'ch' + dataCh;

                  // Get Contents via Ajax
                  getContents(book+".xhtml", null);
               }

               function getContents(book, section) {
                  $.ajax({
                     url: "./content/"+ book,
                     context: document.body,
                     dataType: "html"
                     }).done(function(data) {

                     // Check if Section
                     if (section) {
                        data = $($.parseHTML(data)).filter('[data-section="' + section +'"]');
                     }

                     // Update View and remember where we are:
                     updateSection(data);
                     oldPageTarget = book;

                     // Add Content Anchor events
                     bindClickEvents();
                  })

                  // Add a debug function if we get an error:
                  .fail(function( jqXHR, textStatus ) {
                     alert( "Request failed: " + textStatus );
                  });
               }


               function bindClickEvents() {
                  $(document).on("click",".xref,.link",function(e){
                     e.preventDefault();

                     $this = $(this);

                     // Get the target page and section:
                     var urlTarget = this.href;
                     var urlTargetArray = urlTarget.split("/");
                     var bookAndID = urlTargetArray[urlTargetArray.length - 1];
                     var bookAndIDArray = bookAndID.split("#");

                     // Now we make a decision:
                     //  1) do we load a new section, or
                     //  2) are we inside our own page so focus on a new ID target
                     if (bookAndIDArray[0] == oldPageTarget) {
                        // We are in the same page, so change the focus:
                        window.location.hash = bookAndIDArray[1];
                        } else {
                        // Its a new page so reload
                        getContents(bookAndIDArray[0], bookAndIDArray[1]);
                     }

                  });
               }

               function updateSection(data) {

                  closeMenu();
                  gridWrapper.innerHTML = '';
                  classie.add(gridWrapper, 'content--loading');
                  setTimeout(function() {
                     classie.remove(gridWrapper, 'content--loading');

                     $('.content').html(data);
                     MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
                  }, 700);
               }
            })();
         </script>
      </body>

   </html>
